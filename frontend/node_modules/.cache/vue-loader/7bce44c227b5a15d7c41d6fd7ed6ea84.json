{"remainingRequest":"/Users/chungjisun/Desktop/adonde.kr/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chungjisun/Desktop/adonde.kr/frontend/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chungjisun/Desktop/adonde.kr/frontend/src/components/Login.vue","mtime":1631514526586},{"path":"/Users/chungjisun/Desktop/adonde.kr/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chungjisun/Desktop/adonde.kr/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/chungjisun/Desktop/adonde.kr/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chungjisun/Desktop/adonde.kr/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHtCQVNFX1VSTH0gZnJvbSAnQC9hcGkuanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICB0ZXN0OicnLAogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDp7CiAgICAgICAgLi4ubWFwU3RhdGUoWwogICAgICAgICAgICAndXNlcicKICAgICAgICBdKQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIC4uLm1hcE11dGF0aW9ucyhbCiAgICAgICAgICAgICd1cGRhdGVVc2VyJywKICAgICAgICAgICAgJ3VwZGF0ZVVzZXJTdG9yZWRDaXRpZXMnCiAgICAgICAgXSksCiAgICAgICAgYXN5bmMgbG9naW4oZW1haWwsIG5pY2tuYW1lLCBwcm9maWxlX2ltYWdlLCBkYXRlb2ZiaXJ0aCkgewogICAgICAgICAgICAvL3RoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgIGAke0JBU0VfVVJMfS91c2VyL2xvZ2luYCwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBlbWFpbCA6IGVtYWlsLAogICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBuaWNrbmFtZSwKICAgICAgICAgICAgICAgICAgICBwcm9maWxlX2ltYWdlOiBwcm9maWxlX2ltYWdlLAogICAgICAgICAgICAgICAgICAgIGRhdGVvZmJpcnRoOiBkYXRlb2ZiaXJ0aAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXM6IixyZXMpCiAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlcihyZXMuZGF0YSkKICAgICAgICAgICAgY29uc29sZS5sb2coInNldCBpdGVtIGluIHNlc3Npb24gc3RvcmFnZSIpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpCiAgICAgICAgICAgIC8vIHRoaXMudXBkYXRlU2Vzc2lvblVzZXIocmVzLmRhdGEpCiAgICAgICAgICAgIHRoaXMuZmluZE9uZUJ5SWQocmVzLmRhdGEuaWQpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXMuZGF0YTogIiwgcmVzLmRhdGEpCgogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQoKICAgICAgICAgICAgLy/roZzqt7jsnbjsnbQg66qo65GQIOuBneuCmOqyjCDrkJjrqbQgb3ZlcmxheeulvCDqurzspIDri6QKICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvbG9hZGluZz91c2VySWQ9JyArIHJlcy5kYXRhLmlkfSkKICAgICAgICB9LAoKICAgICAgICBhc3luYyBnb29nbGVMb2dpbigpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiaHR0cHM6Ly9hZG9uZGUta3IuaGVyb2t1YXBwLmNvbS9hdXRoL2dvb2dsZSIKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImxvZ2luLnZ1ZSBzZXNzaW9uIHVzZXI6ICIsICkKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImdvb2dsZSBsb2dpbiBwcm9maWxlOiAiLCBwcm9maWxlKQogICAgICAgIH0sCgogICAgICAgIGZhY2Vib29rTG9naW4oKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gImh0dHBzOi8vYWRvbmRlLWtyLmhlcm9rdWFwcC5jb20vYXV0aC9mYWNlYm9vayIKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImxvZ2luLnZ1ZSBzZXNzaW9uIHVzZXI6ICIsICkKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coImdvb2dsZSBsb2dpbiBwcm9maWxlOiAiLCBwcm9maWxlKQogICAgICAgIH0sCiAgCiAgICAgICAga2FrYW9Mb2dpbigpewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIHZhciB2bSA9IHRoaXMKICAgICAgICAgICAgd2luZG93Lktha2FvLkF1dGgubG9naW4oewogICAgICAgICAgICAgICAgc2NvcGU6ICdwcm9maWxlX25pY2tuYW1lLCBwcm9maWxlX2ltYWdlLCBhY2NvdW50X2VtYWlsLCBiaXJ0aGRheScsCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihhdXRoT2JqKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2F1dGhvYmonLCBhdXRoT2JqLmFjY2Vzc190b2tlbikKICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cuS2FrYW8uQXV0aC5zZXRBY2Nlc3NUb2tlbihhdXRoT2JqLmFjY2Vzc190b2tlbikKICAgICAgICAgICAgICAgICAgICAvLyBmZXRjaCB1c2VyIGRhdGEgZnJvbSBLYWthbyBMb2dpbiBBUEkKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuS2FrYW8uQVBJLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIHVybDonL3YyL3VzZXIvbWUnLAogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtha2FvX2FjY291bnQgPSByZXMua2FrYW9fYWNjb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2FrYW9fYWNjb3VudCkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVtYWlsOiIgLGtha2FvX2FjY291bnQuZW1haWwpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJiaXJ0aGRheToiLGtha2FvX2FjY291bnQuYmlydGhkYXkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJuaWNrbmFtZToiLCBrYWthb19hY2NvdW50LnByb2ZpbGUubmlja25hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpbWciLGtha2FvX2FjY291bnQucHJvZmlsZS5wcm9maWxlX2ltYWdlX3VybCkgIAoKICAgICAgICAgICAgICAgICAgICAgICAgdm0ubG9naW4oa2FrYW9fYWNjb3VudC5lbWFpbCwga2FrYW9fYWNjb3VudC5wcm9maWxlLm5pY2tuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBrYWthb19hY2NvdW50LnByb2ZpbGUucHJvZmlsZV9pbWFnZV91cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGtha2FvX2FjY291bnQuYmlydGhkYXkpCgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyBrYWthb0xvZ291dCgpIHsKICAgICAgICAvLyAgICAgd2luZG93Lktha2FvLkF1dGgubG9nb3V0KChyZXNwb25zZSkgPT4gewogICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIC8vICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVVc2VyIiwge30pCiAgICAgICAgLy8gICAgICAgICBhbGVydCgi66Gc6re47JWE7JuDIik7CiAgICAgICAgLy8gICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDonLyd9KQogICAgICAgIC8vICAgICB9KTsKICAgICAgICAvLyB9ICwKICAgICAgICBhc3luYyBmaW5kT25lQnlJZChpZCl7CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgY29uc3QgdXNlckRldGFpbHMgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgYCR7QkFTRV9VUkx9L3VzZXIvZmluZE9uZUJ5SWRgLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXNlcmRldGFpbHM6Iix1c2VyRGV0YWlscy5kYXRhLnN0b3JlZENpdGllcykKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlclN0b3JlZENpdGllcyh1c2VyRGV0YWlscy5kYXRhLnN0b3JlZENpdGllcykKICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <section class=\"Intro\" >\n        <v-flex>\n            <div class=\"intro\">\n        <v-img \n        style=\"margin: auto\"\n        @click=\"kakaoLogin\"\n        alt=\"kakaoLogin\"\n        contain\n        :src=\"require(`@/assets/en_large.png`)\"\n        transition=\"scale-transition\"\n        width=\"380\"\n        />\n        <v-img \n        style=\"margin: auto\"\n        alt=\"googleLogin\"\n        @click=\"googleLogin\"\n        contain\n        :src=\"require(`@/assets/google.png`)\"\n        transition=\"scale-transition\"\n        width=\"380\"\n      \n        />\n        <v-img \n        style=\"margin: auto\"\n        alt=\"facebookLogin\"\n        @click=\"facebookLogin\"\n        contain\n        :src=\"require(`@/assets/facebook.png`)\"\n        transition=\"scale-transition\"\n        width=\"380\"\n        />\n        <!-- <v-btn \n            class=\"facebookLogin\"\n            width=300\n            @click=\"facebookLogin\" \n            color=\"primary\">\n            <v-icon>\n                mdi-facebook\n            </v-icon>\n            login with facebook\n        </v-btn> -->\n        <!-- <v-img\n            style=\"margin: auto\"\n            v-else\n            @click=\"kakaoLogin\"\n            alt=\"user\"\n            contain\n            :src=\"require(`@/assets/en_large.png`)\"\n            transition=\"scale-transition\"\n            width=\"400px\"\n            /> -->\n\n        <v-progress-circular\n            indeterminate\n            v-if=\"loading\"\n            color=\"amber\"\n        ></v-progress-circular>\n\n        <!-- <v-img\n            width=400\n            style=\"margin: auto\"\n            v-if=\"user != ''\"\n            :src=\"require(`@/assets/welcome.png`)\">\n        </v-img> -->\n\n\n        <!-- <h2>{{user.nickname}}</h2>\n        <img\n            width=\"100px\" \n            :src=\"`${user.profile_image}`\" alt /> -->\n        </div>\n        </v-flex>\n        \n    </section>\n</template>\n\n<script>\nimport { mapState, mapMutations} from 'vuex'\nimport axios from 'axios'\nimport {BASE_URL} from '@/api.js'\n\nexport default {\n    data(){\n        return{\n            test:'',\n            loading: false\n        }\n    },\n    computed:{\n        ...mapState([\n            'user'\n        ])\n    },\n    methods:{\n        ...mapMutations([\n            'updateUser',\n            'updateUserStoredCities'\n        ]),\n        async login(email, nickname, profile_image, dateofbirth) {\n            //this.loading = true\n            const res = await axios.post(\n                `${BASE_URL}/user/login`,\n                {\n                    email : email,\n                    nickname: nickname,\n                    profile_image: profile_image,\n                    dateofbirth: dateofbirth\n                }\n            )\n            console.log(\"res:\",res)\n            this.updateUser(res.data)\n            console.log(\"set item in session storage\")\n            sessionStorage.setItem('user', JSON.stringify(res.data))\n            // this.updateSessionUser(res.data)\n            this.findOneById(res.data.id)\n            console.log(\"res.data: \", res.data)\n\n            this.loading = false\n\n            //로그인이 모두 끝나게 되면 overlay를 꺼준다\n            this.$emit('close');\n\n            this.$router.push({path:'/loading?userId=' + res.data.id})\n        },\n\n        async googleLogin() {\n            window.location.href = \"https://adonde-kr.herokuapp.com/auth/google\"\n            // console.log(\"login.vue session user: \", )\n            // console.log(\"google login profile: \", profile)\n        },\n\n        facebookLogin() {\n            window.location.href = \"https://adonde-kr.herokuapp.com/auth/facebook\"\n            // console.log(\"login.vue session user: \", )\n            // console.log(\"google login profile: \", profile)\n        },\n  \n        kakaoLogin(){\n            this.loading = true\n            var vm = this\n            window.Kakao.Auth.login({\n                scope: 'profile_nickname, profile_image, account_email, birthday',\n                success: function(authObj) {\n                    console.log('authobj', authObj.access_token)\n                    // window.Kakao.Auth.setAccessToken(authObj.access_token)\n                    // fetch user data from Kakao Login API\n                    window.Kakao.API.request({\n                    url:'/v2/user/me',\n                    success: res => {\n                        const kakao_account = res.kakao_account;\n                        console.log(kakao_account)\n                        console.log(\"email:\" ,kakao_account.email)\n                        console.log(\"birthday:\",kakao_account.birthday)\n                        console.log(\"nickname:\", kakao_account.profile.nickname)\n                        console.log(\"img\",kakao_account.profile.profile_image_url)  \n\n                        vm.login(kakao_account.email, kakao_account.profile.nickname,\n                        kakao_account.profile.profile_image_url,\n                        kakao_account.birthday)\n\n                        \n                    }\n                })\n                \n                }\n            })\n        },\n        // kakaoLogout() {\n        //     window.Kakao.Auth.logout((response) => {\n        //         console.log(response);\n        //         this.$store.commit(\"updateUser\", {})\n        //         alert(\"로그아웃\");\n        //         this.$router.push({path:'/'})\n        //     });\n        // } ,\n        async findOneById(id){\n            try{\n            const userDetails = await axios.post(\n                `${BASE_URL}/user/findOneById`,\n                {\n                    id\n                })\n                \n                console.log(\"userdetails:\",userDetails.data.storedCities)\n                this.updateUserStoredCities(userDetails.data.storedCities)\n            }catch(err){\n            console.log(err)\n            }\n        },\n    }\n}\n</script>\n\n\n"]}]}